<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Superfícies Cônicas 3D — Parábola, Hipérbole e Elipse</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      background: radial-gradient(circle at top, #0a0a0a, #000);
      color: white;
      font-family: "Poppins", sans-serif;
      margin: 0;
      padding: 0;
    }
    h1 {
      font-size: 22px;
      margin-top: 15px;
      color: #00ffff;
      text-align: center;
    }
    #grafico {
      width: 100%;
      height: 75vh;
      border-radius: 12px;
      box-shadow: 0 0 20px #00ffff55;
    }
    .container {
      display: flex;
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      gap: 20px;
    }
    .controls-panel {
      width: 320px;
      background: rgba(0, 255, 255, 0.05);
      border-radius: 10px;
      padding: 20px;
      border: 1px solid #00ffff33;
      flex-shrink: 0;
    }
    .graphic-area {
      flex: 1;
      min-width: 0;
    }
    .curve-btn {
      background: rgba(0, 255, 255, 0.1);
      color: #00ffff;
      border: 1px solid #00ffff;
      border-radius: 20px;
      padding: 10px 20px;
      font-family: "Poppins", sans-serif;
      cursor: pointer;
      transition: all 0.3s;
      width: 100%;
      margin-bottom: 10px;
    }
    .curve-btn:hover {
      background: rgba(0, 255, 255, 0.2);
      transform: translateY(-2px);
    }
    .curve-btn.active {
      background: #00ffff;
      color: #000;
      box-shadow: 0 0 15px #00ffff;
    }
    .view-toggle {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    .view-btn {
      flex: 1;
      background: rgba(0, 255, 255, 0.1);
      color: #00ffff;
      border: 1px solid #00ffff;
      border-radius: 20px;
      padding: 8px 15px;
      font-family: "Poppins", sans-serif;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }
    .view-btn:hover {
      background: rgba(0, 255, 255, 0.2);
    }
    .view-btn.active {
      background: #00ffff;
      color: #000;
      box-shadow: 0 0 10px #00ffff;
    }
    .render-toggle {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    .render-btn {
      flex: 1;
      background: rgba(0, 255, 255, 0.1);
      color: #00ffff;
      border: 1px solid #00ffff;
      border-radius: 20px;
      padding: 8px 15px;
      font-family: "Poppins", sans-serif;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }
    .render-btn:hover {
      background: rgba(0, 255, 255, 0.2);
    }
    .render-btn.active {
      background: #00ffff;
      color: #000;
      box-shadow: 0 0 10px #00ffff;
    }
    .param-group {
      margin: 15px 0;
    }
    .param-group label {
      display: block;
      margin-bottom: 5px;
      color: #00ffff;
      font-size: 14px;
    }
    .param-input {
      width: 100%;
      padding: 8px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid #00ffff;
      border-radius: 5px;
      color: white;
      font-family: "Poppins", sans-serif;
    }
    .equation-display {
      background: rgba(0, 255, 255, 0.1);
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-family: monospace;
      border: 1px solid #00ffff33;
      font-size: 14px;
    }
    .legend {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 10px auto;
      font-size: 13px;
      flex-wrap: wrap;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .color-box {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    .description {
      margin: 10px 0;
      font-size: 13px;
      color: #aaa;
      line-height: 1.4;
    }
    .update-btn {
      background: #00ffff;
      color: #000;
      border: none;
      border-radius: 20px;
      padding: 12px 25px;
      font-family: "Poppins", sans-serif;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      width: 100%;
      margin-top: 10px;
    }
    .update-btn:hover {
      background: #00cccc;
      box-shadow: 0 0 15px #00ffff;
    }
    
    @media (max-width: 1024px) {
      .container {
        flex-direction: column;
        max-width: 95%;
      }
      .controls-panel {
        width: 100%;
        margin-right: 0;
        margin-bottom: 20px;
      }
      #grafico {
        height: 65vh;
      }
    }
  </style>
</head>
<body>
  <h1>Superfícies Cônicas 3D — Parábola, Hipérbole e Elipse</h1>
  
  <div class="container">
    <div class="controls-panel">
      <div class="view-toggle">
        <button class="view-btn active" data-view="3d">Visualização 3D</button>
        <button class="view-btn" data-view="2d">Visualização 2D</button>
      </div>
      
      <div class="render-toggle" id="render-toggle" style="display: none;">
        <button class="render-btn active" data-render="surface">Superfície</button>
        <button class="render-btn" data-render="points">Pontos</button>
      </div>
      
      <div class="param-group">
        <button class="curve-btn active" data-curve="parabola">Parábola</button>
        <button class="curve-btn" data-curve="hiperbole">Hipérbole</button>
        <button class="curve-btn" data-curve="elipse">Elipse</button>
      </div>
      
      <div id="parabola-params" class="curve-params">
        <div class="param-group">
          <label for="parabola-a">Parâmetro p:</label>
          <input type="number" id="parabola-a" class="param-input" value="2" step="0.1" min="0.1">
        </div>
        <div class="equation-display" id="parabola-equation">
          y = x²/(4p)
        </div>
      </div>
      
      <div id="hiperbole-params" class="curve-params" style="display:none">
        <div class="param-group">
          <label for="hiperbole-a">Semi-eixo a:</label>
          <input type="number" id="hiperbole-a" class="param-input" value="2" step="0.1" min="0.1">
        </div>
        <div class="param-group">
          <label for="hiperbole-b">Semi-eixo b:</label>
          <input type="number" id="hiperbole-b" class="param-input" value="1" step="0.1" min="0.1">
        </div>
        <div class="equation-display" id="hiperbole-equation">
          x²/a² - y²/b² = 1
        </div>
      </div>
      
      <div id="elipse-params" class="curve-params" style="display:none">
        <div class="param-group">
          <label for="elipse-a">Semi-eixo a:</label>
          <input type="number" id="elipse-a" class="param-input" value="2" step="0.1" min="0.1">
        </div>
        <div class="param-group">
          <label for="elipse-b">Semi-eixo b:</label>
          <input type="number" id="elipse-b" class="param-input" value="4" step="0.1" min="0.1">
        </div>
        <div class="equation-display" id="elipse-equation">
          x²/a² + y²/b² = 1
        </div>
      </div>
      
      <div class="description" id="curve-description">
        Uma parábola é o conjunto de pontos equidistantes de um foco e uma diretriz.
      </div>
      
      <button class="update-btn" id="update-plot">Atualizar Gráfico</button>
      
      <div class="legend">
        <div class="legend-item">
          <div class="color-box" style="background-color: red;"></div>
          <span>Foco</span>
        </div>
        <div class="legend-item">
          <div class="color-box" style="background-color: yellow;"></div>
          <span>Diretriz</span>
        </div>
        <div class="legend-item">
          <div class="color-box" style="background-color: cyan;"></div>
          <span>Centro</span>
        </div>
      </div>
    </div>
    
    <div class="graphic-area">
      <div id="grafico"></div>
    </div>
  </div>

  <script>
    // Parâmetros iniciais
    let currentCurve = 'parabola';
    let currentView = '3d';
    let currentRender = 'surface';
    
    // Configuração inicial
    initPlot();
    
    // Função para inicializar o gráfico
    function initPlot() {
      updatePlot();
      
      // Adiciona event listeners aos botões de curva
      document.querySelectorAll('.curve-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.curve-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          currentCurve = this.getAttribute('data-curve');
          updateInterface();
        });
      });
      
      // Adiciona event listeners aos botões de visualização
      document.querySelectorAll('.view-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          currentView = this.getAttribute('data-view');
          updateRenderToggle();
          updatePlot();
        });
      });
      
      // Adiciona event listeners aos botões de renderização
      document.querySelectorAll('.render-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.render-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          currentRender = this.getAttribute('data-render');
          updatePlot();
        });
      });
      
      document.getElementById('update-plot').addEventListener('click', updatePlot);
      
      document.querySelectorAll('.param-input').forEach(input => {
        input.addEventListener('input', updateEquationDisplay);
      });
      
      updateInterface();
    }
    
    function updateRenderToggle() {
      const renderToggle = document.getElementById('render-toggle');
      if (currentView === '3d') {
        renderToggle.style.display = 'flex';
      } else {
        renderToggle.style.display = 'none';
      }
    }
    
    function updateInterface() {
      document.querySelectorAll('.curve-params').forEach(panel => {
        panel.style.display = 'none';
      });
      
      document.getElementById(`${currentCurve}-params`).style.display = 'block';
      updateDescription();
      updateEquationDisplay();
      updateRenderToggle();
    }
    
    function updateDescription() {
      const description = document.getElementById('curve-description');
      
      switch(currentCurve) {
        case 'parabola':
          description.textContent = "Uma parábola é o conjunto de pontos equidistantes de um foco e uma diretriz.";
          break;
        case 'hiperbole':
          description.textContent = "Uma hipérbole é o conjunto de pontos onde a diferença das distâncias a dois focos é constante.";
          break;
        case 'elipse':
          description.textContent = "Uma elipse é o conjunto de pontos onde a soma das distâncias a dois focos é constante.";
          break;
      }
    }
    
    function updateEquationDisplay() {
      let a, b;
      
      switch(currentCurve) {
        case 'parabola':
          a = document.getElementById('parabola-a').value;
          document.getElementById('parabola-equation').innerHTML = 
            `y = x²/(4×${a})`;
          break;
        case 'hiperbole':
          a = document.getElementById('hiperbole-a').value;
          b = document.getElementById('hiperbole-b').value;
          document.getElementById('hiperbole-equation').innerHTML = 
            `x²/${a}² - y²/${b}² = 1`;
          break;
        case 'elipse':
          a = document.getElementById('elipse-a').value;
          b = document.getElementById('elipse-b').value;
          document.getElementById('elipse-equation').innerHTML = 
            `x²/${a}² + y²/${b}² = 1`;
          break;
      }
    }
    
    function updatePlot() {
      if (currentView === '3d') {
        create3DPlot();
      } else {
        create2DPlot();
      }
    }
    
    function create3DPlot() {
      let x = [], y = [];
      const step = currentRender === 'surface' ? 0.15 : 0.3;
      
      let a, b;
      
      switch(currentCurve) {
        case 'parabola':
          a = parseFloat(document.getElementById('parabola-a').value);
          for (let i = -4; i <= 4; i += step) {
            x.push(i);
          }
          for (let j = -4; j <= 4; j += step) {
            y.push(j);
          }
          
          const z_parabola = [];
          for (let i = 0; i < y.length; i++) {
            const linha = [];
            for (let j = 0; j < x.length; j++) {
              linha.push((x[j] * x[j] + y[i] * y[i]) / (4 * a));
            }
            z_parabola.push(linha);
          }
          
          create3DSurface(x, y, z_parabola, 'Viridis');
          break;
          
        case 'hiperbole':
          a = parseFloat(document.getElementById('hiperbole-a').value);
          b = parseFloat(document.getElementById('hiperbole-b').value);
          
          for (let i = -3; i <= 3; i += step) {
            x.push(i);
          }
          for (let j = -3; j <= 3; j += step) {
            y.push(j);
          }
          
          const z_hiperbole_pos = [];
          const z_hiperbole_neg = [];
          const c = Math.sqrt(a * a + b * b);
          
          for (let i = 0; i < y.length; i++) {
            const linha_pos = [];
            const linha_neg = [];
            for (let j = 0; j < x.length; j++) {
              const valor = (x[j] * x[j]) / (a * a) + (y[i] * y[i]) / (b * b) - 1;
              if (valor > 0) {
                const z_val = Math.sqrt(valor) * c;
                linha_pos.push(z_val);
                linha_neg.push(-z_val);
              } else {
                linha_pos.push(0);
                linha_neg.push(0);
              }
            }
            z_hiperbole_pos.push(linha_pos);
            z_hiperbole_neg.push(linha_neg);
          }
          
          create3DHyperboleSurface(x, y, z_hiperbole_pos, z_hiperbole_neg, 'Hot');
          break;
          
        case 'elipse':
          a = parseFloat(document.getElementById('elipse-a').value);
          b = parseFloat(document.getElementById('elipse-b').value);
          
          const theta = [], phi = [];
          for (let t = 0; t <= Math.PI; t += step) {
            theta.push(t);
          }
          for (let p = 0; p <= 2 * Math.PI; p += step) {
            phi.push(p);
          }
          
          const x_elipse = [], y_elipse = [], z_elipse = [];
          for (let i = 0; i < theta.length; i++) {
            const linha_x = [], linha_y = [], linha_z = [];
            for (let j = 0; j < phi.length; j++) {
              const t = theta[i];
              const p = phi[j];
              linha_x.push(a * Math.sin(t) * Math.cos(p));
              linha_y.push(b * Math.sin(t) * Math.sin(p));
              linha_z.push(b * Math.cos(t));
            }
            x_elipse.push(linha_x);
            y_elipse.push(linha_y);
            z_elipse.push(linha_z);
          }
          
          create3DEllipsoidSurface(x_elipse, y_elipse, z_elipse, 'Electric');
          break;
      }
    }
    
    function create3DSurface(x, y, z, colorscale) {
      let superficie;
      
      if (currentRender === 'surface') {
        superficie = {
          x: x,
          y: y, 
          z: z,
          type: 'surface',
          colorscale: colorscale,
          opacity: 0.95,
          showscale: false,
          name: 'Superfície',
          lighting: {
            diffuse: 0.8,
            specular: 0.1
          }
        };
      } else {
        const x_points = [], y_points = [], z_points = [];
        for (let i = 0; i < y.length; i++) {
          for (let j = 0; j < x.length; j++) {
            x_points.push(x[j]);
            y_points.push(y[i]);
            z_points.push(z[i][j]);
          }
        }
        
        superficie = {
          x: x_points,
          y: y_points,
          z: z_points,
          mode: 'markers',
          type: 'scatter3d',
          marker: {
            size: 2,
            color: '#00ffff',
            opacity: 0.9
          },
          name: 'Pontos'
        };
      }
      
      create3DAxes([superficie]);
    }
    
    function create3DHyperboleSurface(x, y, z_pos, z_neg, colorscale) {
      let superficie_pos, superficie_neg;
      
      if (currentRender === 'surface') {
        superficie_pos = {
          x: x,
          y: y, 
          z: z_pos,
          type: 'surface',
          colorscale: colorscale,
          opacity: 0.9,
          showscale: false,
          name: 'Superfície +Z'
        };
        
        superficie_neg = {
          x: x,
          y: y, 
          z: z_neg,
          type: 'surface',
          colorscale: colorscale,
          opacity: 0.9,
          showscale: false,
          name: 'Superfície -Z'
        };
        
        create3DAxes([superficie_pos, superficie_neg]);
      } else {
        const x_points = [], y_points = [], z_points = [];
        for (let i = 0; i < y.length; i++) {
          for (let j = 0; j < x.length; j++) {
            if (z_pos[i][j] !== 0) {
              x_points.push(x[j]);
              y_points.push(y[i]);
              z_points.push(z_pos[i][j]);
              x_points.push(x[j]);
              y_points.push(y[i]);
              z_points.push(z_neg[i][j]);
            }
          }
        }
        
        const pontos = {
          x: x_points,
          y: y_points,
          z: z_points,
          mode: 'markers',
          type: 'scatter3d',
          marker: {
            size: 2,
            color: '#00ffff',
            opacity: 0.8
          },
          name: 'Pontos'
        };
        
        create3DAxes([pontos]);
      }
    }
    
    function create3DEllipsoidSurface(x, y, z, colorscale) {
      let superficie;
      
      if (currentRender === 'surface') {
        superficie = {
          x: x,
          y: y, 
          z: z,
          type: 'surface',
          colorscale: colorscale,
          opacity: 0.95,
          showscale: false,
          name: 'Elipsoide',
          lighting: {
            diffuse: 0.8,
            specular: 0.1
          }
        };
      } else {
        const x_points = [], y_points = [], z_points = [];
        for (let i = 0; i < y.length; i++) {
          for (let j = 0; j < x[i].length; j++) {
            x_points.push(x[i][j]);
            y_points.push(y[i][j]);
            z_points.push(z[i][j]);
          }
        }
        
        superficie = {
          x: x_points,
          y: y_points,
          z: z_points,
          mode: 'markers',
          type: 'scatter3d',
          marker: {
            size: 2,
            color: '#00ffff',
            opacity: 0.8
          },
          name: 'Pontos'
        };
      }
      
      create3DAxes([superficie]);
    }
    
    function create3DAxes(superficies) {
      let elementos = [...superficies];
      
      // Adicionar elementos geométricos específicos para cada curva em 3D
      let a, b;
      
      switch(currentCurve) {
        case 'parabola':
          a = parseFloat(document.getElementById('parabola-a').value);
          
          // Foco da parábola em 3D
          elementos.push({
            x: [0], y: [0], z: [a],
            mode: 'markers',
            type: 'scatter3d',
            marker: {
              color: 'red',
              size: 8,
              symbol: 'circle'
            },
            name: 'Foco'
          });
          
          // Diretriz da parábola em 3D (plano)
          const diretriz_points = [];
          for (let i = -4; i <= 4; i += 0.5) {
            for (let j = -4; j <= 4; j += 0.5) {
              diretriz_points.push({
                x: i, y: j, z: -a
              });
            }
          }
          
          elementos.push({
            x: diretriz_points.map(p => p.x),
            y: diretriz_points.map(p => p.y),
            z: diretriz_points.map(p => p.z),
            mode: 'markers',
            type: 'scatter3d',
            marker: {
              color: 'yellow',
              size: 2,
              opacity: 0.3
            },
            name: 'Diretriz'
          });
          break;
          
        case 'hiperbole':
          a = parseFloat(document.getElementById('hiperbole-a').value);
          b = parseFloat(document.getElementById('hiperbole-b').value);
          const c_hiperbole = Math.sqrt(a*a + b*b);
          
          // Focos da hipérbole em 3D
          elementos.push({
            x: [c_hiperbole, -c_hiperbole],
            y: [0, 0],
            z: [0, 0],
            mode: 'markers',
            type: 'scatter3d',
            marker: {
              color: 'red',
              size: 8,
              symbol: 'circle'
            },
            name: 'Focos'
          });
          
          // Centro da hipérbole em 3D
          elementos.push({
            x: [0], y: [0], z: [0],
            mode: 'markers',
            type: 'scatter3d',
            marker: {
              color: 'cyan',
              size: 6,
              symbol: 'diamond'
            },
            name: 'Centro'
          });
          break;
          
        case 'elipse':
          a = parseFloat(document.getElementById('elipse-a').value);
          b = parseFloat(document.getElementById('elipse-b').value);
          const c_elipse = Math.sqrt(Math.abs(a*a - b*b));
          
          // Focos da elipse em 3D
          elementos.push({
            x: [c_elipse, -c_elipse],
            y: [0, 0],
            z: [0, 0],
            mode: 'markers',
            type: 'scatter3d',
            marker: {
              color: 'red',
              size: 8,
              symbol: 'circle'
            },
            name: 'Focos'
          });
          
          // Centro da elipse em 3D
          elementos.push({
            x: [0], y: [0], z: [0],
            mode: 'markers',
            type: 'scatter3d',
            marker: {
              color: 'cyan',
              size: 6,
              symbol: 'diamond'
            },
            name: 'Centro'
          });
          break;
      }
      
      // Eixos coordenados
      const eixo_x = {
        x: [-6, 6], y: [0, 0], z: [0, 0],
        mode: 'lines', type: 'scatter3d',
        line: { color: '#ff4444', width: 4 },
        name: 'Eixo X (Abcissa)'
      };
      
      const eixo_y = {
        x: [0, 0], y: [-6, 6], z: [0, 0],
        mode: 'lines', type: 'scatter3d',
        line: { color: '#44ff44', width: 4 },
        name: 'Eixo Y (Ordenada)'
      };
      
      const eixo_z = {
        x: [0, 0], y: [0, 0], z: [-6, 6],
        mode: 'lines', type: 'scatter3d',
        line: { color: '#4444ff', width: 4 },
        name: 'Eixo Z (Cota)'
      };
      
      elementos.push(eixo_x, eixo_y, eixo_z);
      
      const layout = {
        scene: {
          xaxis: { 
            title: 'X (Abcissa) ←→', 
            gridcolor: '#666', 
            gridwidth: 1,
            range: [-6, 6],
            backgroundcolor: '#000',
            color: '#ff4444',
            titlefont: { color: '#ff4444' }
          },
          yaxis: { 
            title: 'Y (Ordenada) ↑↓', 
            gridcolor: '#666', 
            gridwidth: 1,
            range: [-6, 6],
            backgroundcolor: '#000',
            color: '#44ff44',
            titlefont: { color: '#44ff44' }
          },
          zaxis: { 
            title: 'Z (Cota) ↕', 
            gridcolor: '#666', 
            gridwidth: 1,
            range: [-6, 6],
            backgroundcolor: '#000',
            color: '#4444ff',
            titlefont: { color: '#4444ff' }
          },
          aspectratio: { x: 1, y: 1, z: 1 },
          bgcolor: '#000',
          camera: {
            eye: { x: 1.8, y: 1.8, z: 1.8 }
          }
        },
        margin: { t: 40, l: 0, r: 0, b: 0 },
        paper_bgcolor: '#000',
        plot_bgcolor: '#000',
        showlegend: true,
        legend: {
          bgcolor: 'rgba(0,0,0,0.8)',
          font: { color: 'white' },
          x: 0,
          y: 1
        }
      };
      
      Plotly.newPlot('grafico', elementos, layout);
    }
    
    function create2DPlot() {
      const step = 0.05;
      let x = [];
      let y = [];
      
      let a, b;
      
      switch(currentCurve) {
        case 'parabola':
          a = parseFloat(document.getElementById('parabola-a').value);
          for (let i = -6; i <= 6; i += step) {
            x.push(i);
            y.push((i * i) / (4 * a));
          }
          break;
          
        case 'hiperbole':
          a = parseFloat(document.getElementById('hiperbole-a').value);
          b = parseFloat(document.getElementById('hiperbole-b').value);
          for (let i = -6; i <= 6; i += step) {
            if (Math.abs(i) >= a - 0.1) {
              x.push(i, i);
              const y_val = Math.sqrt((i * i) / (a * a) - 1) * b;
              y.push(y_val, -y_val);
            }
          }
          break;
          
        case 'elipse':
          a = parseFloat(document.getElementById('elipse-a').value);
          b = parseFloat(document.getElementById('elipse-b').value);
          for (let i = -a; i <= a; i += step) {
            x.push(i, i);
            const y_val = Math.sqrt(1 - (i * i) / (a * a)) * b;
            y.push(y_val, -y_val);
          }
          break;
      }
      
      const trace = {
        x: x,
        y: y,
        mode: 'lines',
        type: 'scatter',
        line: { 
          color: '#00ffff', 
          width: 3,
          shape: 'spline'
        },
        name: currentCurve.charAt(0).toUpperCase() + currentCurve.slice(1),
        showlegend: false
      };
      
      let elementos = [trace];
      
      // Eixos coordenados
      const eixo_x = {
        x: [-8, 8], y: [0, 0],
        mode: 'lines',
        type: 'scatter',
        line: { color: '#ff4444', width: 2 },
        name: 'Eixo X (Abcissa)',
        showlegend: false
      };
      
      const eixo_y = {
        x: [0, 0], y: [-8, 8],
        mode: 'lines',
        type: 'scatter',
        line: { color: '#44ff44', width: 2 },
        name: 'Eixo Y (Ordenada)',
        showlegend: false
      };
      
      elementos.push(eixo_x, eixo_y);
      
      // Elementos geométricos para TODAS as curvas em 2D
      switch(currentCurve) {
        case 'parabola':
          // Foco da parábola
          elementos.push({
            x: [0],
            y: [a],
            mode: 'markers',
            type: 'scatter',
            marker: { 
              color: 'red', 
              size: 12,
              symbol: 'circle',
              line: { color: 'white', width: 1 }
            },
            name: 'Foco'
          });
          
          // Diretriz da parábola
          elementos.push({
            x: [-8, 8],
            y: [-a, -a],
            mode: 'lines',
            type: 'scatter',
            line: { 
              color: 'yellow', 
              width: 3, 
              dash: 'dash'
            },
            name: 'Diretriz'
          });
          break;
          
        case 'hiperbole':
          const c_hiperbole = Math.sqrt(a*a + b*b);
          
          // Focos da hipérbole
          elementos.push({
            x: [c_hiperbole, -c_hiperbole],
            y: [0, 0],
            mode: 'markers',
            type: 'scatter',
            marker: { 
              color: 'red', 
              size: 12,
              symbol: 'circle',
              line: { color: 'white', width: 1 }
            },
            name: 'Focos'
          });
          
          // Centro da hipérbole
          elementos.push({
            x: [0],
            y: [0],
            mode: 'markers',
            type: 'scatter',
            marker: { 
              color: 'cyan', 
              size: 10, 
              symbol: 'diamond',
              line: { color: 'white', width: 1 }
            },
            name: 'Centro'
          });
          break;
          
        case 'elipse':
          const c_elipse = Math.sqrt(Math.abs(a*a - b*b));
          
          // Focos da elipse
          elementos.push({
            x: [c_elipse, -c_elipse],
            y: [0, 0],
            mode: 'markers',
            type: 'scatter',
            marker: { 
              color: 'red', 
              size: 12,
              symbol: 'circle',
              line: { color: 'white', width: 1 }
            },
            name: 'Focos'
          });
          
          // Centro da elipse
          elementos.push({
            x: [0],
            y: [0],
            mode: 'markers',
            type: 'scatter',
            marker: { 
              color: 'cyan', 
              size: 10, 
              symbol: 'diamond',
              line: { color: 'white', width: 1 }
            },
            name: 'Centro'
          });
          break;
      }
      
      const layout = {
        xaxis: { 
          title: 'X (Abcissa) ←→', 
          gridcolor: '#444', 
          gridwidth: 1,
          range: [-8, 8],
          zeroline: false,
          color: '#ff4444',
          titlefont: { color: '#ff4444', size: 14 }
        },
        yaxis: { 
          title: 'Y (Ordenada) ↑↓', 
          gridcolor: '#444', 
          gridwidth: 1,
          range: [-8, 8],
          zeroline: false,
          color: '#44ff44',
          titlefont: { color: '#44ff44', size: 14 },
          scaleanchor: "x",
          scaleratio: 1
        },
        margin: { t: 40, l: 80, r: 40, b: 80 },
        paper_bgcolor: '#000',
        plot_bgcolor: '#000',
        showlegend: true,
        legend: {
          bgcolor: 'rgba(0,0,0,0.8)',
          font: { color: 'white' },
          x: 0.02,
          y: 0.98
        },
        plot_bgcolor: 'rgba(0,0,0,0.1)'
      };
      
      Plotly.newPlot('grafico', elementos, layout);
    }
  </script>
</body>
</html>